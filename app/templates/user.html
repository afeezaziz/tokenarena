{% extends 'base.html' %}
{% block head_extra %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "User {{ npub }}",
  "identifier": "{{ npub }}",
  "url": "{{ canonical_url }}"
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {"@type": "ListItem", "position": 1, "name": "Home", "item": "{{ SITE_URL }}"},
    {"@type": "ListItem", "position": 2, "name": "User", "item": "{{ canonical_url }}"}
  ]
}
</script>
{% endblock %}
{% block content %}
<div id="user-page" data-npub="{{ npub }}">
  <section class="hero" style="text-align:left">
    <div style="display:flex; gap:16px; align-items:center;">
      <div class="avatar" id="user-avatar">ðŸ‘¤</div>
      <div>
        <h1 id="user-name" style="margin:0">User</h1>
        <div class="muted" style="font-size:13px; word-break:break-all">npub: <span id="user-npub">{{ npub }}</span></div>
      </div>
    </div>
  </section>

  <section class="stats-grid" id="user-stats">
    <div class="stat-card">
      <div class="stat-label">Portfolio Value</div>
      <div class="stat-value" id="portfolio-value">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Tokens Held</div>
      <div class="stat-value" id="tokens-held">â€”</div>
    </div>
  </section>

  <section class="charts">
    <h2 class="section-title">Portfolio Allocation</h2>
    <div class="charts-grid">
      <div class="chart-card">
        <canvas id="allocChart"></canvas>
      </div>
    </div>
  </section>

  <section class="battles">
    <h2 class="section-title">Holdings</h2>
    <div class="table-wrapper">
      <table class="tokens-table" aria-label="Holdings">
        <thead>
          <tr>
            <th scope="col">Token</th>
            <th scope="col">Quantity</th>
            <th scope="col">Price</th>
            <th scope="col">Value</th>
            <th scope="col">Share</th>
          </tr>
        </thead>
        <tbody id="holdings-tbody"></tbody>
      </table>
    </div>
  </section>
</div>
{% endblock %}

{% block scripts %}
<script defer src="{{ url_for('static', filename='js/user.js') }}?v={{ STATIC_VERSION }}"></script>
{% endblock %}
