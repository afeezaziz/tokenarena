{% extends 'base.html' %}
  {% block head_extra %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Home",
    "url": "{{ canonical_url }}",
    "description": "{{ description or DEFAULT_DESCRIPTION }}"
  }
  </script>
  {% endblock %}

{% block scripts %}
  <script defer src="{{ url_for('static', filename='js/home.js') }}?v={{ STATIC_VERSION }}"></script>
{% endblock %}
  {% block content %}
  <section class="hero">
  <div class="pill"><span class="dot"></span> Live Demo</div>
  <h1>Token Arena — Battle-tested Market Intel</h1>
  <p class="subtitle">Leaderboards, holders, charts and competitions across the ecosystem.</p>
  <div class="cta-row">
    <a href="/dashboard" class="btn btn-cta dashboard-btn"><span class="label">Open Dashboard</span> <span class="arrow" aria-hidden="true">→</span></a>
    <a href="/#tokens" class="btn">Explore Tokens</a>
  </div>
  </section>

  <section class="features" id="features">
    <div class="features-grid">
      <div class="feature-card">
        <h3>Real-time Leaderboards</h3>
        <p>Rank tokens by returns, holders growth, share delta, turnover and composite scores.</p>
      </div>
      <div class="feature-card">
        <h3>Holder Analytics</h3>
        <p>Understand adoption with 24h holders growth, top holders and wallet distribution.</p>
      </div>
      <div class="feature-card">
        <h3>Competition-ready</h3>
        <p>Run friendly trading cups and track scores with mock data or your own datasource.</p>
      </div>
    </div>
  </section>

  <section class="battles" id="demo-presets">
    <div class="segmented" id="demo-presets-buttons" style="margin: 6px 0 10px;">
      <div class="btn" data-preset="calm-small">Calm · Small</div>
      <div class="btn active" data-preset="normal-medium">Normal · Medium</div>
      <div class="btn" data-preset="degen-large">Degen · Large</div>
    </div>
    <div class="muted" style="font-size:12px">Tip: presets automatically enable Demo Mode.</div>
  </section>

  <section class="stats-grid" id="market-stats">
  <div class="stat-card">
    <div class="stat-label">Total Market Cap</div>
    <div id="stat-market-cap" class="stat-value">—</div>
  </div>
  <div class="stat-card">
    <div class="stat-label">24h Volume</div>
    <div id="stat-volume" class="stat-value">—</div>
  </div>
  <div class="stat-card">
    <div class="stat-label">Total Tokens</div>
    <div id="stat-tokens" class="stat-value">—</div>
  </div>
  <div class="stat-card">
    <div class="stat-label">Total Holders</div>
    <div id="stat-holders" class="stat-value">—</div>
  </div>
  <div class="stat-card">
    <div class="stat-label">Top Dominance</div>
    <div id="stat-dominance" class="stat-value">—</div>
  </div>
  </section>

<section class="battles" id="tokens">
  <h2>Leaderboard — Top Movers</h2>
  <div class="segmented" id="movers-metric" style="margin: 6px 0 10px;">
    <div class="btn active" data-metric="change_24h">24h</div>
    <div class="btn" data-metric="r7">7D</div>
    <div class="btn" data-metric="r7_sharpe">Sharpe 7D</div>
    <div class="btn" data-metric="holders_growth_pct_24h">Holders 24h</div>
    <div class="btn" data-metric="share_delta_7d">Share Δ 7D</div>
    <div class="btn" data-metric="turnover_pct">Turnover</div>
    <div class="btn" data-metric="composite">Composite</div>
  </div>
  <div id="top-movers" class="movers"></div>

  <div class="table-tools">
    <input id="tokens-filter" class="search-input small" type="search" placeholder="Filter tokens (symbol or name)…" autocomplete="off" />
    <input id="min-mcap" class="search-input small" type="number" inputmode="numeric" placeholder="Min Mcap (USD)" style="max-width: 160px;" />
    <input id="min-volume" class="search-input small" type="number" inputmode="numeric" placeholder="Min Vol 24h (USD)" style="max-width: 180px;" />
    <div class="tool-buttons">
      <button class="btn" id="export-csv">Export CSV</button>
    </div>
    <div class="segmented" id="table-metric" style="margin-left:auto;">
      <div class="btn active" data-metric="change_24h">24h</div>
      <div class="btn" data-metric="r7">7D</div>
      <div class="btn" data-metric="r7_sharpe">Sharpe 7D</div>
      <div class="btn" data-metric="holders_growth_pct_24h">Holders 24h</div>
      <div class="btn" data-metric="share_delta_7d">Share Δ 7D</div>
      <div class="btn" data-metric="turnover_pct">Turnover</div>
      <div class="btn" data-metric="composite">Composite</div>
    </div>
    <div class="segmented" id="spark-range">
      <div class="btn active" data-days="7">7D</div>
      <div class="btn" data-days="30">30D</div>
    </div>
  </div>

  <div class="table-wrapper">
    <table class="tokens-table" aria-label="Tokens">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col" class="sortable" data-key="symbol">Token <span class="arrow">▼</span></th>
          <th scope="col" class="sortable" data-key="price_usd">Price <span class="arrow">▼</span></th>
          <th scope="col" id="spark-col-label">7d</th>
          <th scope="col" class="sortable" data-key="market_cap_usd">Market Cap <span class="arrow">▼</span></th>
          <th scope="col" class="sortable" data-key="holders_count">Holders <span class="arrow">▼</span></th>
          <th scope="col" class="sortable" data-metric="metric" id="metric-col-label">Metric <span class="arrow">▼</span></th>
          <th scope="col" class="sortable" data-key="change_24h">24h <span class="arrow">▼</span></th>
        </tr>
      </thead>
      <tbody id="tokens-tbody"></tbody>
    </table>
  </div>
  <div class="pagination-bar">
    <div class="rows-select">Rows:
      <select id="page-size">
        <option value="10">10</option>
        <option value="25">25</option>
        <option value="50">50</option>
      </select>
    </div>
    <div class="pagination" id="tokens-pagination"></div>
  </div>
</section>

<section class="charts" id="charts">
  <h2>Ecosystem Charts</h2>
  <div class="segmented" id="global-range" style="margin: 6px 0 12px;">
    <div class="btn" data-range="7d">7D</div>
    <div class="btn active" data-range="30d">30D</div>
    <div class="btn" data-range="90d">90D</div>
    <div class="btn" data-range="all">All</div>
  </div>
  <div class="charts-grid">
    <div class="chart-card">
      <h3>Number of Tokens Over Time</h3>
      <canvas id="globalTokensChart"></canvas>
    </div>
    <div class="chart-card">
      <h3>Number of Holders Over Time</h3>
      <canvas id="globalHoldersChart"></canvas>
    </div>
  </div>
</section>

<section class="battles" id="whats-new">
  <h2>What’s New</h2>
  <div id="whats-new-list"></div>
 </section>
{% endblock %}
